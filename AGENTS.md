# AGENTS.md - lander-template 智能工作規範

## 🎯 核心原則（不可違反）

1. **輕量流程，品質不減**：以前端模板快速迭代為主，流程精簡但輸出的 Astro/Tailwind 內容必須可直接使用。
2. **最新文檔優先**：任何框架／工具細節以 Context7 查詢到的最新版 Astro、Tailwind 官方文檔與相關標準為準，避免沿用舊寫法。
3. **中文協作**：所有回覆、註解與文檔維持中文，所有非注释部份的代码，包括UI/通知必须使用**英文**。
4. **先思考再實作**：變更前先分析需求與可行方案，確認無冗餘調整後再動手。
5. **工具優先**：充分運用既有最佳工具鏈（Context7、chrome-devtools MCP 等），禁止跳過檢查流程。
6. **透明可追溯**：記錄關鍵決策與疑難排查過程，特別是資料來源與調試結果。
7. **持續優化**：從每次執行中提煉成功模式，必要時更新本文件。
8. **結果導向**：最終以模板渲染、互動體驗與錯誤為零為評估標準。

## 📊 量化標準（建議遵循）

### 🏗️ 工程重點
- **結構對齊**：遵循 Astro 元件化與資料驅動設計，維持 `src/components` 與 `src/data` 的模組邏輯；避免散落樣式。
- **命名清晰**：組件、變數、JSON 欄位採語義化命名，與資料結構描述相符。
- **必要中文註解**：對複雜互動或非直覺流程補充精簡中文註解。

### ⚡ 性能考量
- **靜態為先**：優先使用 Astro 靜態輸出，動態互動集中在 `scripts/landing-init.ts` 等既有腳本。
- **圖片與資源最佳化**：確認素材放置於 `public/products/{sku}/images/` 並視需要壓縮，避免未使用資源。
- **Hydration 控制**：僅對必要區塊啟用客端互動。

### 🧪 測試要求
- **指令檢查**：`npm run dev`／`npm run build` 無報錯。
- **瀏覽器驗證**：使用 `mcp_servers.chrome-devtools` 自動檢閱 console / network 是否清潔，並對使用者反饋的顯示問題進行調試。
- **資料完整性**：新增或修改 `src/data` 時，確保 JSON 結構符合 README 說明並能被 `loadProduct()` 正常解析。

## 🧭 任務適配策略

| 任務類型 | 建議流程 | 備註 |
| --- | --- | --- |
| 模板調整／新增區塊 | 分析 → 參考 Context7 官方文檔 → 快速實作 → chrome-devtools 驗證 | 重用既有組件或樣式變體 |
| 样式微調 | 直接對應 Tailwind 最新語法 → 瀏覽器檢查 | 需留意設計一致性 |
| 產品資料更新 | 依 README 流程編輯 JSON → `npm run dev` 檢查 → chrome-devtools 快速掃描錯誤 | 若遇解析錯誤先回溯資料欄位 |

## 💡 工程流程建議

1. **需求釐清**：確認變更範圍、目標 SKU 與 UI 元件。
2. **最新資訊查詢**：透過 Context7 取得 Astro/Tailwind 最新指引；若需其他新技術，一律查官方資料。
3. **快速實作**：在對應的 Astro 組件或 JSON 檔更新，遵循資料驅動結構。
4. **檢查與調試**：
   - 執行 `npm run dev` 進行現場驗證。
   - 呼叫 `mcp_servers.chrome-devtools` 檢查 console、Network、Performance 是否有錯誤或警告。
   - 若使用者反映畫面異常，立刻使用同工具進行 DOM/樣式調試並記錄重現步驟。
5. **最終確認**：`npm run build` 確保可靜態輸出；必要時提交調整記錄與調試截圖（如有）。

## 🛠️ 工具指南

### 📚 知識查詢
- **首選**：`Context7`（`resolve-library-id` → `get-library-docs`）查詢 Astro、Tailwind 或其他前端新技術官方文檔，確保採用最新語法和最佳實踐。
- **備選**：`DuckDuckGo` → `firecrawl` 用於搜尋其他補充資料。
- **降級**：必要時參考 README 或舊版檔案，但需註明來源版本。

### 🧰 開發／調試
- **`mcp_servers.chrome-devtools`**：
  - 開發完成或遇到顯示／互動異常時必須呼叫。
  - 至少覆蓋 console error/ warning、Network 失敗請求、DOM 結構與樣式檢查。
  - 若問題涉及互動（例如 Sticky CTA 未生效），需使用該工具的逐步調試功能定位。
- **Astro CLI**：`npm run dev`、`npm run build`、`npm run preview`。

### 🗂️ 資料管理
- 產品資訊統一維護於 `src/data/products/{sku}/`。
- 圖片與靜態資源置於 `public/products/{sku}/images/`，更新後確認路徑正確。

## 🔁 持續改進

1. **執行前**：根據任務類型選擇合適流程；評估是否需要新增元件或重用既有模組。
2. **執行中**：記錄 Context7 查詢版本、重點設定與 chrome-devtools 調試結論。
3. **執行後**：若發現更佳做法（例如新指令或流程），更新此文件與 README。
4. **知識積累**：整理常見排錯案例、成功設計樣式與資料建模策略。

## ✅ 核心檢查表

- [ ] 需求範圍與預期輸出已確認。
- [ ] 透過 Context7 取得最新官方參考並記錄版本或網址。
- [ ] 代碼／資料調整符合 Astro 元件化與 Tailwind 實務。
- [ ] `npm run dev`、`npm run build` 皆無錯誤。
- [ ] 使用 `mcp_servers.chrome-devtools` 檢視 console、Network、DOM 無異常；如有問題已記錄排查結果。
- [ ] 更新結果與決策已備註於提交或文檔。

## 🤝 協作紀律

- **查證優先**：先查最新文檔，後實作；避免主觀猜測。
- **重用優先**：探索既有組件或樣式變體，避免重複造輪子。
- **調試優先**：所有前端呈現問題必須使用 chrome-devtools MCP 查核，並回報調試流程。
- **誠實溝通**：發現未知情況或資料不足時即刻同步。
- **穩健交付**：即使流程精簡，仍需確保模板在瀏覽器與建置階段穩定運作。
